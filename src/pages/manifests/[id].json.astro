---
export async function getStaticPaths() {
  const allJsons = await Astro.glob('../../../manifests/*.json');
  return allJsons.map((j) => {
    console.log('j: ', j);
    const path = j.default.id.split('/');
    if (path.length > 0) {
      const id = path[path.length - 1].replace(/\.[^/.]+$/, '');
      return {
        params: { id },
        props: { json: j.default },
      };
    }
  });
}

const { id } = Astro.params;
const { json } = Astro.props;
---

<>
  {json && JSON.stringify(json, null, 2)}
</>
